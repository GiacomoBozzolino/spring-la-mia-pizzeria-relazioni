<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css} "/>
<title>Insert title here</title>
</head>
<style th:replace="frags :: style"></style>
	<body>
		<div class="container-fluid app-container border border-black rounded">
			<header th:replace="frags :: header"></header>
			<main>
				<div class="container-fluid">
					<div class="row p-5">
						<div class="col-12 d-flex align-items-center justify-content-center">
							<img th:src="${pizza.getFoto()}">
						</div>
						<div class="col-12 text-center my-3">
							<h3 th:text="${pizza.getNome()} + ' - ' + ${pizza.getPrezzoFormattato()}"></h3>
							<p th:text="${pizza.getDescrizione()}" class="py-3"></p>
						</div>
						<div th:replace="frags :: homebutton('Home')"></div>
					</div>
					<div class="col-12 text-center">
					    <h4>Offerte Speciali:</h4>
					    <ul>
					        <!-- Loop sulle offerte speciali associate alla pizza -->
					        <li th:each="offerta : ${pizza.offertaSpeciale}">
					            <span th:text="${offerta.getTitolo()}"></span>
					            <span th:text="' - ' + ${offerta.getDataDiInizio()} + ' - ' + ${offerta.getDataDiFine()}"></span>
					            <!-- Aggiunta: Bottone per modificare l'offerta speciale -->
					            <a th:href="@{/pizzas/{pizza_id}/offerte/edit/{offerta_id}(pizza_id=${pizza.id}, offerta_id=${offerta.id})}" class="btn btn-sm btn-warning mx-2">
					                Modifica
					            </a>
					        </li>
					    </ul>
					</div>

					<!-- Aggiunta: Bottone per creare nuova offerta speciale -->
					<div class="col-12 text-center mt-3">
					    <a th:href="@{/pizzas/{pizza_id}/offerte (pizza_id=${pizza.getId()})}" class="btn btn-primary">
					        Crea nuova offerta speciale
					    </a>
					</div>
				</div>
			</main>
		</div>
		<!-- Bootstrap Bundle with Popper -->
 		<script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}"></script>
	</body>
</html>